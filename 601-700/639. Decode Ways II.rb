ONE = {'1' => 1, '2' => 1, '3' => 1, '4' => 1, '5' => 1, '6' => 1, '7' => 1, '8' => 1, '9' => 1, '*' => 9}
TWO = {'10' => 1, '11' => 1, '12' => 1, '13' => 1, '14' => 1, '15' => 1, '16' => 1, '17' => 1, '18' => 1, '19' => 1, '20' => 1, '21' => 1,
       '22' => 1, '23' => 1, '24' => 1, '25' => 1, '26' => 1, '*0' => 2, '*1' => 2, '*2' => 2, '*3' => 2, '*4' => 2, '*5' => 2, '*6' => 2,
       '*7' => 1, '*8' => 1, '*9' => 1, '1*' => 9, '2*' => 6, '**' => 15}

MOD = 10**9 + 7

# @param {String} s
# @return {Integer}
def num_decodings(s)
  f = [ 1, ONE[s[0]].to_i ]
  s.split("").each_with_index do |num, i|
    next if i == 0
    f = [f[1], (ONE[s[i]].to_i * f[1] + TWO[s[i-1..i]].to_i * f[0]) % MOD]
  end

  f.last
end
